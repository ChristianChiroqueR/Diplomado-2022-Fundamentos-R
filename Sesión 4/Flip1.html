<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Visualización de datos con ggplot2</title>
    <meta charset="utf-8" />
    <meta name="author" content="Christian Chiroque Ruiz" />
    <script src="libs/header-attrs-2.16/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/useR.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/useR-fonts.css" rel="stylesheet" />
    <link href="libs/animate.css-3.7.2/animate.xaringan.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Visualización de datos con ggplot2
]
.subtitle[
## Visualización de datos con R
]
.author[
### Christian Chiroque Ruiz
]

---





layout: true
class: animated, fadeIn

---


class: inverse

# ¿Dónde estamos en el curso?


- Introducción a la Ciencia de Datos


- Funciones e introducción al Tidyverse


- Tidyverse: Manipulación de datos con {dplyr} 


- **Tidyverse: Visualización de datos con {ggplot2}**


- Datos perdidos
 

---

# ggplot2

Es un sistema organizado de visualización de datos. Forma parte del conjunto de librerías llamado *tidyverse*. 

```
install.packages("tidyverse") # Sólo si lo necesitas
library(tidyverse)
```

La primera versión del paquete fue liberada por Hadley Wickham el 10 de junio de 2007, desde entonces el paquete se ha enriquecido con diferentes elementos. 

Ggplot2 se ha convertido en el paquete de creación de visualizaciones más popular en el universo R por permitir de manera sencilla obtener gráficos de alta calidad. Incluso [otros programas de Data Science carecen de una herramienta como ggplot2](https://towardsdatascience.com/how-to-use-ggplot2-in-python-74ab8adec129).

---

# Gramática de ggplot2


.pull-left[

- La gramática del ggplot2 se basa en el libro The Grammar of Graphics 

- A diferencia de los gráficos con el paquete base donde creamos un gráfico a base de pasos sucesivos, ggplot2 se basa en una gramática de gráficos, añadiendo elementos a un graphical device , donde distintos componentes independientes se pueden combinar de muchas maneras diferentes.

]


.pull-right[

![](https://m.media-amazon.com/images/I/41T80eRz+aL._SY344_BO1,204,203,200_.jpg)

]

---

class: center

# Son 7 capas principales

![](https://miro.medium.com/max/1100/1*l844RJyls1FraalChUtneQ.webp)


---


# 1ra Capa: Data

Es la materia prima sobre la cual se van a posicionar el resto de capas y los datos que se desean representar. 

El ggplot2 sólo acepta un tipo de datos: data.frames/ tibbles. No permite *vectores*.

Vamos a utilizar la data del paquete {gapminder}.



---


# 1ra Capa: Data



```r
#install.packages("gapminder")
library(gapminder)
data&lt;-gapminder::gapminder
head(data, 3)
```

```
# A tibble: 3 × 6
  country     continent  year lifeExp      pop gdpPercap
  &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
1 Afghanistan Asia       1952    28.8  8425333      779.
2 Afghanistan Asia       1957    30.3  9240934      821.
3 Afghanistan Asia       1962    32.0 10267083      853.
```


---

# 2da Capa: Aesthetics ("Estéticas")

```
aes()
```

- Indican las variables que se van a graficar, tanto en el **eje horizontal** (x) como en el **eje vertical** (y).

- Ggplo2 no está pensado para gráficos tridimensionales, pero ciertamente podemos incluir una tercera variable, por ejemplo, indicando el **color** si deseamos identificar grupos, o indicando el tamaño (de los puntos en un scatterplot) para agregar una nueva variable cuantitativa.




---

# 3ra Capa: Geometric Objects (Objetos geométricos)

- Funciones: geom_line(), geom_boxplot(), etc.

- Indica qué tipo de gráfico (geometría) se va a construir: gráfico de barras, columnas, puntos, histográmas, boxplots, líneas, densidad, entre otros. 

- En el paquete {ggplot2} existen 30 geometrías disponibles. Puedes ver el detalle de estos en la [documentación del paquete](https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf).

- Cada geometría tiene su propia función y, como ya hemos visto, cada una puede tener distintos argumentos. 



---
class: inverse, middle, center

# Estas 3 capas son el mínimo necesario para hacer un gráfico: 

 Data +
 Aesthetics +
 Geometries
 
 
 
---

count: false
 
Recuerda los pasos básicos
.panel1-chunk_1-auto[

```r
data   #&lt;&lt;
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 1,704 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# … with 1,694 more rows
```
]

---
count: false
 
Recuerda los pasos básicos
.panel1-chunk_1-auto[

```r
data %&gt;%
  ggplot()   #&lt;&lt;
```
]
 
.panel2-chunk_1-auto[
![](Flip1_files/figure-html/chunk_1_auto_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Recuerda los pasos básicos
.panel1-chunk_1-auto[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp)   #&lt;&lt;
```
]
 
.panel2-chunk_1-auto[
![](Flip1_files/figure-html/chunk_1_auto_03_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Recuerda los pasos básicos
.panel1-chunk_1-auto[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  geom_histogram()  #&lt;&lt;
```
]
 
.panel2-chunk_1-auto[
![](Flip1_files/figure-html/chunk_1_auto_04_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_1-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_1-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_1-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




 

---

count: false
 
Probemos con argumentos y otras geometrías univariadas
.panel1-primer_chunk-rotate[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  geom_histogram(binwidth=5,color="white")  #&lt;&lt;
```
]
 
.panel2-primer_chunk-rotate[
![](Flip1_files/figure-html/primer_chunk_rotate_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Probemos con argumentos y otras geometrías univariadas
.panel1-primer_chunk-rotate[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  geom_boxplot()  #&lt;&lt;
```
]
 
.panel2-primer_chunk-rotate[
![](Flip1_files/figure-html/primer_chunk_rotate_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Probemos con argumentos y otras geometrías univariadas
.panel1-primer_chunk-rotate[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  geom_boxplot(notch=TRUE,color="blue")  #&lt;&lt;
```
]
 
.panel2-primer_chunk-rotate[
![](Flip1_files/figure-html/primer_chunk_rotate_03_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-primer_chunk-rotate {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-primer_chunk-rotate {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-primer_chunk-rotate {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

count: false
 
Ahora probemos con gráficos bivariados
.panel1-chunk_3-auto[

```r
data   #&lt;&lt;
```
]
 
.panel2-chunk_3-auto[

```
# A tibble: 1,704 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# … with 1,694 more rows
```
]

---
count: false
 
Ahora probemos con gráficos bivariados
.panel1-chunk_3-auto[

```r
data %&gt;%
  ggplot()   #&lt;&lt;
```
]
 
.panel2-chunk_3-auto[
![](Flip1_files/figure-html/chunk_3_auto_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Ahora probemos con gráficos bivariados
.panel1-chunk_3-auto[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp)   #&lt;&lt;
```
]
 
.panel2-chunk_3-auto[
![](Flip1_files/figure-html/chunk_3_auto_03_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Ahora probemos con gráficos bivariados
.panel1-chunk_3-auto[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  aes(y = gdpPercap)   #&lt;&lt;
```
]
 
.panel2-chunk_3-auto[
![](Flip1_files/figure-html/chunk_3_auto_04_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Ahora probemos con gráficos bivariados
.panel1-chunk_3-auto[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  aes(y = gdpPercap) +
  geom_point()   #&lt;&lt;
```
]
 
.panel2-chunk_3-auto[
![](Flip1_files/figure-html/chunk_3_auto_05_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Ahora probemos con gráficos bivariados
.panel1-chunk_3-auto[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  aes(y = gdpPercap) +
  geom_point() +
  aes(color=continent)   #&lt;&lt;
```
]
 
.panel2-chunk_3-auto[
![](Flip1_files/figure-html/chunk_3_auto_06_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Ahora probemos con gráficos bivariados
.panel1-chunk_3-auto[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  aes(y = gdpPercap) +
  geom_point() +
  aes(color=continent) +
  geom_smooth()  #&lt;&lt;
```
]
 
.panel2-chunk_3-auto[
![](Flip1_files/figure-html/chunk_3_auto_07_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_3-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_3-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_3-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




 

---

count: false
 
Mezclemos otras funciones del tidyverse y más de un gráfico
.panel1-chunk_4-auto[

```r
data   #&lt;&lt;
```
]
 
.panel2-chunk_4-auto[

```
# A tibble: 1,704 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# … with 1,694 more rows
```
]

---
count: false
 
Mezclemos otras funciones del tidyverse y más de un gráfico
.panel1-chunk_4-auto[

```r
data %&gt;%
  filter(country=="Peru", year&gt;1960)   #&lt;&lt;
```
]
 
.panel2-chunk_4-auto[

```
# A tibble: 10 × 6
   country continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Peru    Americas   1962    49.1 10516500     4957.
 2 Peru    Americas   1967    51.4 12132200     5788.
 3 Peru    Americas   1972    55.4 13954700     5938.
 4 Peru    Americas   1977    58.4 15990099     6281.
 5 Peru    Americas   1982    61.4 18125129     6435.
 6 Peru    Americas   1987    64.1 20195924     6361.
 7 Peru    Americas   1992    66.5 22430449     4446.
 8 Peru    Americas   1997    68.4 24748122     5838.
 9 Peru    Americas   2002    69.9 26769436     5909.
10 Peru    Americas   2007    71.4 28674757     7409.
```
]

---
count: false
 
Mezclemos otras funciones del tidyverse y más de un gráfico
.panel1-chunk_4-auto[

```r
data %&gt;%
  filter(country=="Peru", year&gt;1960) %&gt;%
  ggplot()   #&lt;&lt;
```
]
 
.panel2-chunk_4-auto[
![](Flip1_files/figure-html/chunk_4_auto_03_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Mezclemos otras funciones del tidyverse y más de un gráfico
.panel1-chunk_4-auto[

```r
data %&gt;%
  filter(country=="Peru", year&gt;1960) %&gt;%
  ggplot() +
  aes(x = year)   #&lt;&lt;
```
]
 
.panel2-chunk_4-auto[
![](Flip1_files/figure-html/chunk_4_auto_04_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Mezclemos otras funciones del tidyverse y más de un gráfico
.panel1-chunk_4-auto[

```r
data %&gt;%
  filter(country=="Peru", year&gt;1960) %&gt;%
  ggplot() +
  aes(x = year) +
  aes(y = gdpPercap)   #&lt;&lt;
```
]
 
.panel2-chunk_4-auto[
![](Flip1_files/figure-html/chunk_4_auto_05_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Mezclemos otras funciones del tidyverse y más de un gráfico
.panel1-chunk_4-auto[

```r
data %&gt;%
  filter(country=="Peru", year&gt;1960) %&gt;%
  ggplot() +
  aes(x = year) +
  aes(y = gdpPercap) +
  geom_line()  #&lt;&lt;
```
]
 
.panel2-chunk_4-auto[
![](Flip1_files/figure-html/chunk_4_auto_06_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Mezclemos otras funciones del tidyverse y más de un gráfico
.panel1-chunk_4-auto[

```r
data %&gt;%
  filter(country=="Peru", year&gt;1960) %&gt;%
  ggplot() +
  aes(x = year) +
  aes(y = gdpPercap) +
  geom_line()+
  geom_point()  #&lt;&lt;
```
]
 
.panel2-chunk_4-auto[
![](Flip1_files/figure-html/chunk_4_auto_07_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_4-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_4-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_4-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




 


---

count: false
 
Y el gráfico de barras?
.panel1-chunk_7-auto[

```r
data   #&lt;&lt;
```
]
 
.panel2-chunk_7-auto[

```
# A tibble: 1,704 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# … with 1,694 more rows
```
]

---
count: false
 
Y el gráfico de barras?
.panel1-chunk_7-auto[

```r
data %&gt;%
  select(country,continent)   #&lt;&lt;
```
]
 
.panel2-chunk_7-auto[

```
# A tibble: 1,704 × 2
   country     continent
   &lt;fct&gt;       &lt;fct&gt;    
 1 Afghanistan Asia     
 2 Afghanistan Asia     
 3 Afghanistan Asia     
 4 Afghanistan Asia     
 5 Afghanistan Asia     
 6 Afghanistan Asia     
 7 Afghanistan Asia     
 8 Afghanistan Asia     
 9 Afghanistan Asia     
10 Afghanistan Asia     
# … with 1,694 more rows
```
]

---
count: false
 
Y el gráfico de barras?
.panel1-chunk_7-auto[

```r
data %&gt;%
  select(country,continent) %&gt;%
  group_by(continent)   #&lt;&lt;
```
]
 
.panel2-chunk_7-auto[

```
# A tibble: 1,704 × 2
# Groups:   continent [5]
   country     continent
   &lt;fct&gt;       &lt;fct&gt;    
 1 Afghanistan Asia     
 2 Afghanistan Asia     
 3 Afghanistan Asia     
 4 Afghanistan Asia     
 5 Afghanistan Asia     
 6 Afghanistan Asia     
 7 Afghanistan Asia     
 8 Afghanistan Asia     
 9 Afghanistan Asia     
10 Afghanistan Asia     
# … with 1,694 more rows
```
]

---
count: false
 
Y el gráfico de barras?
.panel1-chunk_7-auto[

```r
data %&gt;%
  select(country,continent) %&gt;%
  group_by(continent) %&gt;%
  filter(!duplicated(country))   #&lt;&lt;
```
]
 
.panel2-chunk_7-auto[

```
# A tibble: 142 × 2
# Groups:   continent [5]
   country     continent
   &lt;fct&gt;       &lt;fct&gt;    
 1 Afghanistan Asia     
 2 Albania     Europe   
 3 Algeria     Africa   
 4 Angola      Africa   
 5 Argentina   Americas 
 6 Australia   Oceania  
 7 Austria     Europe   
 8 Bahrain     Asia     
 9 Bangladesh  Asia     
10 Belgium     Europe   
# … with 132 more rows
```
]

---
count: false
 
Y el gráfico de barras?
.panel1-chunk_7-auto[

```r
data %&gt;%
  select(country,continent) %&gt;%
  group_by(continent) %&gt;%
  filter(!duplicated(country)) %&gt;%
  ungroup()   #&lt;&lt;
```
]
 
.panel2-chunk_7-auto[

```
# A tibble: 142 × 2
   country     continent
   &lt;fct&gt;       &lt;fct&gt;    
 1 Afghanistan Asia     
 2 Albania     Europe   
 3 Algeria     Africa   
 4 Angola      Africa   
 5 Argentina   Americas 
 6 Australia   Oceania  
 7 Austria     Europe   
 8 Bahrain     Asia     
 9 Bangladesh  Asia     
10 Belgium     Europe   
# … with 132 more rows
```
]

---
count: false
 
Y el gráfico de barras?
.panel1-chunk_7-auto[

```r
data %&gt;%
  select(country,continent) %&gt;%
  group_by(continent) %&gt;%
  filter(!duplicated(country)) %&gt;%
  ungroup() %&gt;%
  ggplot()  #&lt;&lt;
```
]
 
.panel2-chunk_7-auto[
![](Flip1_files/figure-html/chunk_7_auto_06_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Y el gráfico de barras?
.panel1-chunk_7-auto[

```r
data %&gt;%
  select(country,continent) %&gt;%
  group_by(continent) %&gt;%
  filter(!duplicated(country)) %&gt;%
  ungroup() %&gt;%
  ggplot()+
  aes(x=continent)   #&lt;&lt;
```
]
 
.panel2-chunk_7-auto[
![](Flip1_files/figure-html/chunk_7_auto_07_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Y el gráfico de barras?
.panel1-chunk_7-auto[

```r
data %&gt;%
  select(country,continent) %&gt;%
  group_by(continent) %&gt;%
  filter(!duplicated(country)) %&gt;%
  ungroup() %&gt;%
  ggplot()+
  aes(x=continent) +
  geom_bar()  #&lt;&lt;
```
]
 
.panel2-chunk_7-auto[
![](Flip1_files/figure-html/chunk_7_auto_08_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_7-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_7-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_7-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




 

---

count: false
 
Y el gráfico de barras apiladas?
.panel1-chunk_8-auto[

```r
data   #&lt;&lt;
```
]
 
.panel2-chunk_8-auto[

```
# A tibble: 1,704 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# … with 1,694 more rows
```
]

---
count: false
 
Y el gráfico de barras apiladas?
.panel1-chunk_8-auto[

```r
data %&gt;%
  select(-4, -5)   #&lt;&lt;
```
]
 
.panel2-chunk_8-auto[

```
# A tibble: 1,704 × 4
   country     continent  year gdpPercap
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952      779.
 2 Afghanistan Asia       1957      821.
 3 Afghanistan Asia       1962      853.
 4 Afghanistan Asia       1967      836.
 5 Afghanistan Asia       1972      740.
 6 Afghanistan Asia       1977      786.
 7 Afghanistan Asia       1982      978.
 8 Afghanistan Asia       1987      852.
 9 Afghanistan Asia       1992      649.
10 Afghanistan Asia       1997      635.
# … with 1,694 more rows
```
]

---
count: false
 
Y el gráfico de barras apiladas?
.panel1-chunk_8-auto[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(  #&lt;&lt;
              gdpPercap&lt;4000~ "Bajo GDPpc",  #&lt;&lt;
              TRUE~ "Alto GDPpc"))   #&lt;&lt;
```
]
 
.panel2-chunk_8-auto[

```
# A tibble: 1,704 × 5
   country     continent  year gdpPercap gdp_cat   
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;     
 1 Afghanistan Asia       1952      779. Bajo GDPpc
 2 Afghanistan Asia       1957      821. Bajo GDPpc
 3 Afghanistan Asia       1962      853. Bajo GDPpc
 4 Afghanistan Asia       1967      836. Bajo GDPpc
 5 Afghanistan Asia       1972      740. Bajo GDPpc
 6 Afghanistan Asia       1977      786. Bajo GDPpc
 7 Afghanistan Asia       1982      978. Bajo GDPpc
 8 Afghanistan Asia       1987      852. Bajo GDPpc
 9 Afghanistan Asia       1992      649. Bajo GDPpc
10 Afghanistan Asia       1997      635. Bajo GDPpc
# … with 1,694 more rows
```
]

---
count: false
 
Y el gráfico de barras apiladas?
.panel1-chunk_8-auto[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(
              gdpPercap&lt;4000~ "Bajo GDPpc",
              TRUE~ "Alto GDPpc")) %&gt;%
  filter(year==2007)   #&lt;&lt;
```
]
 
.panel2-chunk_8-auto[

```
# A tibble: 142 × 5
   country     continent  year gdpPercap gdp_cat   
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;     
 1 Afghanistan Asia       2007      975. Bajo GDPpc
 2 Albania     Europe     2007     5937. Alto GDPpc
 3 Algeria     Africa     2007     6223. Alto GDPpc
 4 Angola      Africa     2007     4797. Alto GDPpc
 5 Argentina   Americas   2007    12779. Alto GDPpc
 6 Australia   Oceania    2007    34435. Alto GDPpc
 7 Austria     Europe     2007    36126. Alto GDPpc
 8 Bahrain     Asia       2007    29796. Alto GDPpc
 9 Bangladesh  Asia       2007     1391. Bajo GDPpc
10 Belgium     Europe     2007    33693. Alto GDPpc
# … with 132 more rows
```
]

---
count: false
 
Y el gráfico de barras apiladas?
.panel1-chunk_8-auto[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(
              gdpPercap&lt;4000~ "Bajo GDPpc",
              TRUE~ "Alto GDPpc")) %&gt;%
  filter(year==2007) %&gt;%
  ggplot()  #&lt;&lt;
```
]
 
.panel2-chunk_8-auto[
![](Flip1_files/figure-html/chunk_8_auto_05_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Y el gráfico de barras apiladas?
.panel1-chunk_8-auto[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(
              gdpPercap&lt;4000~ "Bajo GDPpc",
              TRUE~ "Alto GDPpc")) %&gt;%
  filter(year==2007) %&gt;%
  ggplot()+
  aes(x=continent, fill=gdp_cat)   #&lt;&lt;
```
]
 
.panel2-chunk_8-auto[
![](Flip1_files/figure-html/chunk_8_auto_06_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Y el gráfico de barras apiladas?
.panel1-chunk_8-auto[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(
              gdpPercap&lt;4000~ "Bajo GDPpc",
              TRUE~ "Alto GDPpc")) %&gt;%
  filter(year==2007) %&gt;%
  ggplot()+
  aes(x=continent, fill=gdp_cat) +
  geom_bar()  #&lt;&lt;
```
]
 
.panel2-chunk_8-auto[
![](Flip1_files/figure-html/chunk_8_auto_07_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_8-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_8-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_8-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;







---

count: false
 
Puedes colocar grupos en uno de los ejes para gráficos univariados
.panel1-chunk_9-user[

```r
data %&gt;%  #&lt;&lt;
  select(-4, -5) %&gt;%  #&lt;&lt;
  mutate(gdp_cat=case_when(  #&lt;&lt;
    gdpPercap&lt;4000~ "Bajo GDPpc",  #&lt;&lt;
    TRUE~ "Alto GDPpc")) %&gt;%  #&lt;&lt;
  filter(year==2007)   #&lt;&lt;
```
]
 
.panel2-chunk_9-user[

```
# A tibble: 142 × 5
   country     continent  year gdpPercap gdp_cat   
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;     
 1 Afghanistan Asia       2007      975. Bajo GDPpc
 2 Albania     Europe     2007     5937. Alto GDPpc
 3 Algeria     Africa     2007     6223. Alto GDPpc
 4 Angola      Africa     2007     4797. Alto GDPpc
 5 Argentina   Americas   2007    12779. Alto GDPpc
 6 Australia   Oceania    2007    34435. Alto GDPpc
 7 Austria     Europe     2007    36126. Alto GDPpc
 8 Bahrain     Asia       2007    29796. Alto GDPpc
 9 Bangladesh  Asia       2007     1391. Bajo GDPpc
10 Belgium     Europe     2007    33693. Alto GDPpc
# … with 132 more rows
```
]

---
count: false
 
Puedes colocar grupos en uno de los ejes para gráficos univariados
.panel1-chunk_9-user[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(
    gdpPercap&lt;4000~ "Bajo GDPpc",
    TRUE~ "Alto GDPpc")) %&gt;%
  filter(year==2007) %&gt;%
  ggplot()  #&lt;&lt;
```
]
 
.panel2-chunk_9-user[
![](Flip1_files/figure-html/chunk_9_user_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Puedes colocar grupos en uno de los ejes para gráficos univariados
.panel1-chunk_9-user[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(
    gdpPercap&lt;4000~ "Bajo GDPpc",
    TRUE~ "Alto GDPpc")) %&gt;%
  filter(year==2007) %&gt;%
  ggplot()+
  aes(x=continent)+  #&lt;&lt;
  aes(y=gdpPercap) +  #&lt;&lt;
  aes(color=continent)   #&lt;&lt;
```
]
 
.panel2-chunk_9-user[
![](Flip1_files/figure-html/chunk_9_user_03_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Puedes colocar grupos en uno de los ejes para gráficos univariados
.panel1-chunk_9-user[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(
    gdpPercap&lt;4000~ "Bajo GDPpc",
    TRUE~ "Alto GDPpc")) %&gt;%
  filter(year==2007) %&gt;%
  ggplot()+
  aes(x=continent)+
  aes(y=gdpPercap) +
  aes(color=continent) +
  geom_boxplot()  #&lt;&lt;
```
]
 
.panel2-chunk_9-user[
![](Flip1_files/figure-html/chunk_9_user_04_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_9-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_9-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_9-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;







---

count: false
 
Separando grupos por color
.panel1-chunk_12-user[

```r
data %&gt;%  #&lt;&lt;
  filter(continent=="Oceania") %&gt;%  #&lt;&lt;
  ggplot()+  #&lt;&lt;
  aes(x=year) +  #&lt;&lt;
  aes(y=lifeExp)   #&lt;&lt;
```
]
 
.panel2-chunk_12-user[
![](Flip1_files/figure-html/chunk_12_user_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Separando grupos por color
.panel1-chunk_12-user[

```r
data %&gt;%
  filter(continent=="Oceania") %&gt;%
  ggplot()+
  aes(x=year) +
  aes(y=lifeExp) +
  aes(color=country)   #&lt;&lt;
```
]
 
.panel2-chunk_12-user[
![](Flip1_files/figure-html/chunk_12_user_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Separando grupos por color
.panel1-chunk_12-user[

```r
data %&gt;%
  filter(continent=="Oceania") %&gt;%
  ggplot()+
  aes(x=year) +
  aes(y=lifeExp) +
  aes(color=country) +
  geom_line() +  #&lt;&lt;
  geom_point()  #&lt;&lt;
```
]
 
.panel2-chunk_12-user[
![](Flip1_files/figure-html/chunk_12_user_03_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_12-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_12-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_12-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---

count: false
 
Separando grupos sin color
.panel1-chunk_13-user[

```r
data %&gt;%  #&lt;&lt;
  filter(continent=="Oceania") %&gt;%  #&lt;&lt;
  ggplot()+  #&lt;&lt;
  aes(x=year) +  #&lt;&lt;
  aes(y=lifeExp)   #&lt;&lt;
```
]
 
.panel2-chunk_13-user[
![](Flip1_files/figure-html/chunk_13_user_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Separando grupos sin color
.panel1-chunk_13-user[

```r
data %&gt;%
  filter(continent=="Oceania") %&gt;%
  ggplot()+
  aes(x=year) +
  aes(y=lifeExp) +
  aes(group=country)   #&lt;&lt;
```
]
 
.panel2-chunk_13-user[
![](Flip1_files/figure-html/chunk_13_user_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Separando grupos sin color
.panel1-chunk_13-user[

```r
data %&gt;%
  filter(continent=="Oceania") %&gt;%
  ggplot()+
  aes(x=year) +
  aes(y=lifeExp) +
  aes(group=country) +
  geom_line() +  #&lt;&lt;
  geom_point()  #&lt;&lt;
```
]
 
.panel2-chunk_13-user[
![](Flip1_files/figure-html/chunk_13_user_03_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_13-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_13-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_13-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;







---
class: inverse, center, middle


# Ahora vayamos con las demás capas!


---

# 4ta Capa: Facets (Facetas)

.pull-left[

- Permite descomponer un gráfico en subgráficos, también llamadas cuadrículas o facetas, según una variable **cualitativa**.

- Sirve para comparar grupos, separándolos y así facilitando la identificación de diferencias significativas entre estos. 

]


.pull-right[

![](http://www.sthda.com/sthda/RDoc/figure/ggplot2/ggplot2-facet-facet-with-one-variable-1.png)

]


---

count: false
 
Utilizamos facet_wrap para separar la figura por las categorías de UNA variable cualitativa
.panel1-chunk_5-user[

```r
data %&gt;%  #&lt;&lt;
  ggplot() +  #&lt;&lt;
  aes(x = lifeExp) +  #&lt;&lt;
  aes(y = gdpPercap) +  #&lt;&lt;
  geom_point() +  #&lt;&lt;
  aes(color=continent)   #&lt;&lt;
```
]
 
.panel2-chunk_5-user[
![](Flip1_files/figure-html/chunk_5_user_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Utilizamos facet_wrap para separar la figura por las categorías de UNA variable cualitativa
.panel1-chunk_5-user[

```r
data %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  aes(y = gdpPercap) +
  geom_point() +
  aes(color=continent) +
  facet_wrap(~continent)  #&lt;&lt;
```
]
 
.panel2-chunk_5-user[
![](Flip1_files/figure-html/chunk_5_user_02_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_5-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_5-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_5-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




 

---

count: false
 
Usamos facet_grid() para cruzar las categorías de dos variables cualitativas
.panel1-chunk_6-user[

```r
data %&gt;%  #&lt;&lt;
  filter(continent %in% c("Africa","Americas", "Europe")) %&gt;%  #&lt;&lt;
  filter(year==2007) %&gt;%  #&lt;&lt;
  mutate(gdp_cat=case_when(gdpPercap&lt;4000~ "Bajo GDPpc",  #&lt;&lt;
                           TRUE~ "Alto GDPpc")) %&gt;%  #&lt;&lt;
  ggplot() +  #&lt;&lt;
  aes(x = lifeExp) +  #&lt;&lt;
  aes(y = gdpPercap) +  #&lt;&lt;
  geom_point() +  #&lt;&lt;
  aes(color=continent)   #&lt;&lt;
```
]
 
.panel2-chunk_6-user[
![](Flip1_files/figure-html/chunk_6_user_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Usamos facet_grid() para cruzar las categorías de dos variables cualitativas
.panel1-chunk_6-user[

```r
data %&gt;%
  filter(continent %in% c("Africa","Americas", "Europe")) %&gt;%
  filter(year==2007) %&gt;%
  mutate(gdp_cat=case_when(gdpPercap&lt;4000~ "Bajo GDPpc",
                           TRUE~ "Alto GDPpc")) %&gt;%
  ggplot() +
  aes(x = lifeExp) +
  aes(y = gdpPercap) +
  geom_point() +
  aes(color=continent) +
  facet_grid(cols = vars(continent), rows = vars(gdp_cat))  #&lt;&lt;
```
]
 
.panel2-chunk_6-user[
![](Flip1_files/figure-html/chunk_6_user_02_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_6-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_6-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_6-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




 


---

# 5ta Capa: Statistical Transformations (Tranformaciones Estadísticas)

- Permite adicionar indicadores o estadísticos específicos calculados a partir de los datos de insumo. 

- Por ejemplo, se puede colocar la media de una variable numérica. 



---

count: false
 
Podemos graficar haciendo uso de stat_summary
.panel1-chunk_11-user[

```r
data %&gt;%  #&lt;&lt;
    mutate(gdp_cat=case_when(  #&lt;&lt;
    gdpPercap&lt;4000~ "Bajo GDPpc",  #&lt;&lt;
    TRUE~ "Alto GDPpc")) %&gt;%  #&lt;&lt;
    filter(year==2007) %&gt;%  #&lt;&lt;
    ggplot()  #&lt;&lt;
```
]
 
.panel2-chunk_11-user[
![](Flip1_files/figure-html/chunk_11_user_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Podemos graficar haciendo uso de stat_summary
.panel1-chunk_11-user[

```r
data %&gt;%
    mutate(gdp_cat=case_when(
    gdpPercap&lt;4000~ "Bajo GDPpc",
    TRUE~ "Alto GDPpc")) %&gt;%
    filter(year==2007) %&gt;%
    ggplot()+
    aes(x=continent, group=gdp_cat, color=gdp_cat)  #&lt;&lt;
```
]
 
.panel2-chunk_11-user[
![](Flip1_files/figure-html/chunk_11_user_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Podemos graficar haciendo uso de stat_summary
.panel1-chunk_11-user[

```r
data %&gt;%
    mutate(gdp_cat=case_when(
    gdpPercap&lt;4000~ "Bajo GDPpc",
    TRUE~ "Alto GDPpc")) %&gt;%
    filter(year==2007) %&gt;%
    ggplot()+
    aes(x=continent, group=gdp_cat, color=gdp_cat)+
    stat_summary(aes(y=gdpPercap),  #&lt;&lt;
               fun ="mean",  #&lt;&lt;
               geom="point")   #&lt;&lt;
```
]
 
.panel2-chunk_11-user[
![](Flip1_files/figure-html/chunk_11_user_03_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Podemos graficar haciendo uso de stat_summary
.panel1-chunk_11-user[

```r
data %&gt;%
    mutate(gdp_cat=case_when(
    gdpPercap&lt;4000~ "Bajo GDPpc",
    TRUE~ "Alto GDPpc")) %&gt;%
    filter(year==2007) %&gt;%
    ggplot()+
    aes(x=continent, group=gdp_cat, color=gdp_cat)+
    stat_summary(aes(y=gdpPercap),
               fun ="mean",
               geom="point") +
    stat_summary(aes(y=gdpPercap),  #&lt;&lt;
               fun ="mean",  #&lt;&lt;
               geom="line")  #&lt;&lt;
```
]
 
.panel2-chunk_11-user[
![](Flip1_files/figure-html/chunk_11_user_04_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_11-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_11-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_11-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---

count: false
 
Podemos agregarlo encima de otro gráfico
.panel1-chunk_10-user[

```r
data %&gt;%  #&lt;&lt;
  select(-4, -5) %&gt;%  #&lt;&lt;
  mutate(gdp_cat=case_when(  #&lt;&lt;
    gdpPercap&lt;4000~ "Bajo GDPpc",  #&lt;&lt;
    TRUE~ "Alto GDPpc")) %&gt;%  #&lt;&lt;
  filter(year==2007) %&gt;%  #&lt;&lt;
  ggplot()+  #&lt;&lt;
  aes(x=continent)+ aes(y=gdpPercap) +  #&lt;&lt;
  aes(color=continent) +  #&lt;&lt;
  geom_boxplot()  #&lt;&lt;
```
]
 
.panel2-chunk_10-user[
![](Flip1_files/figure-html/chunk_10_user_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Podemos agregarlo encima de otro gráfico
.panel1-chunk_10-user[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(
    gdpPercap&lt;4000~ "Bajo GDPpc",
    TRUE~ "Alto GDPpc")) %&gt;%
  filter(year==2007) %&gt;%
  ggplot()+
  aes(x=continent)+ aes(y=gdpPercap) +
  aes(color=continent) +
  geom_boxplot()+
  stat_summary(fun ="mean",  #&lt;&lt;
               colour="red",  #&lt;&lt;
               size = 5,  #&lt;&lt;
               geom="point")   #&lt;&lt;
```
]
 
.panel2-chunk_10-user[
![](Flip1_files/figure-html/chunk_10_user_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Podemos agregarlo encima de otro gráfico
.panel1-chunk_10-user[

```r
data %&gt;%
  select(-4, -5) %&gt;%
  mutate(gdp_cat=case_when(
    gdpPercap&lt;4000~ "Bajo GDPpc",
    TRUE~ "Alto GDPpc")) %&gt;%
  filter(year==2007) %&gt;%
  ggplot()+
  aes(x=continent)+ aes(y=gdpPercap) +
  aes(color=continent) +
  geom_boxplot()+
  stat_summary(fun ="mean",
               colour="red",
               size = 5,
               geom="point") +
  stat_summary(fun ="median",  #&lt;&lt;
               colour="blue",  #&lt;&lt;
               size = 5,  #&lt;&lt;
               geom="point")  #&lt;&lt;
```
]
 
.panel2-chunk_10-user[
![](Flip1_files/figure-html/chunk_10_user_03_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_10-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_10-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_10-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;








---

# 6ta Capa: Coordinates (Coordinadas)

- Sirve para especificar cómo será presentada la información de las variables en los ejes horizontal y vertical. 


---

count: false
 
Cambiamos la escala de uno de los ejes
.panel1-chunk_19-user[

```r
data %&gt;%  #&lt;&lt;
  filter(continent=="Asia", year==2007) %&gt;%  #&lt;&lt;
  ggplot()+  #&lt;&lt;
  aes(x = gdpPercap, y = lifeExp,  #&lt;&lt;
      size = pop, color = country) %&gt;%  #&lt;&lt;
  geom_point(show.legend = F, alpha = 0.7)   #&lt;&lt;
```
]
 
.panel2-chunk_19-user[
![](Flip1_files/figure-html/chunk_19_user_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Cambiamos la escala de uno de los ejes
.panel1-chunk_19-user[

```r
data %&gt;%
  filter(continent=="Asia", year==2007) %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;%
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10()   #&lt;&lt;
```
]
 
.panel2-chunk_19-user[
![](Flip1_files/figure-html/chunk_19_user_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Cambiamos la escala de uno de los ejes
.panel1-chunk_19-user[

```r
data %&gt;%
  filter(continent=="Asia", year==2007) %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;%
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',  #&lt;&lt;
       y = 'Life Expectancy')  #&lt;&lt;
```
]
 
.panel2-chunk_19-user[
![](Flip1_files/figure-html/chunk_19_user_03_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_19-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_19-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_19-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;








---

# 7ma Capa: Themes

- Funciones: theme_gray(), theme_bw(), theme_classic()

- Es la capa que le da la apariencia final que tendrá el gráfico. 

- Se utiliza para personalizar el estilo del gráfico, pues [modifica elementos del gráfico](https://ggplot2.tidyverse.org/reference/theme.html) no ligados a los datos. 

- Se puede crear un tema para que se adapte a la imagen institucional de una organización o al tipo de diseño de un documento específico. 

- Se modifican temas tales como el color del fondo, los ejes, tamaño del gráfico, grilla, posición de los nombres, entre otros. 



---

count: false
 
Cambiamos los temas de un gráfico de acuerdo a nuestro gusto
.panel1-chunk_17-rotate[

```r
data %&gt;%
  filter(continent=="Asia", year==2007) %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;%
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15))+
  theme_gray()  #&lt;&lt;
```
]
 
.panel2-chunk_17-rotate[
![](Flip1_files/figure-html/chunk_17_rotate_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Cambiamos los temas de un gráfico de acuerdo a nuestro gusto
.panel1-chunk_17-rotate[

```r
data %&gt;%
  filter(continent=="Asia", year==2007) %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;%
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15))+
  theme_bw()   #&lt;&lt;
```
]
 
.panel2-chunk_17-rotate[
![](Flip1_files/figure-html/chunk_17_rotate_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Cambiamos los temas de un gráfico de acuerdo a nuestro gusto
.panel1-chunk_17-rotate[

```r
data %&gt;%
  filter(continent=="Asia", year==2007) %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;%
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15))+
  theme_classic()  #&lt;&lt;
```
]
 
.panel2-chunk_17-rotate[
![](Flip1_files/figure-html/chunk_17_rotate_03_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_17-rotate {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_17-rotate {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_17-rotate {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




```r
data %&gt;% 
  filter(continent=="Asia", year==2007) %&gt;% 
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;% 
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15))+
  theme_gray()+#ROTATE
  theme_bw() +#ROTATE
  theme_classic() #ROTATE
```

![](Flip1_files/figure-html/chunk_17-1.png)&lt;!-- --&gt;



---

class: inverse, center, middle

# Extensiones de ggplot2

Hay mucho más!

120 extensiones disponibles en:

https://exts.ggplot2.tidyverse.org/gallery/

---
# gganimate

- Amplía la gramática de gráficos implementada por ggplot2 para incluir la descripción de la animación. 

- Proporciona una gama de nuevas clases de gramática que se pueden agregar al objeto de la trama para personalizar cómo debe cambiar con el tiempo.


```r
# install.packages("gganimate")
library(gganimate)
#Consider installing:
#- the `gifski` package for gif output
#- the `av` package for video output
```

---

count: false
 
Primero generamos un gráfico
.panel1-chunk_14-user[

```r
data %&gt;%  #&lt;&lt;
  ggplot()+  #&lt;&lt;
  aes(x = gdpPercap, y = lifeExp,  #&lt;&lt;
      size = pop, color = country) %&gt;%  #&lt;&lt;
  geom_point(show.legend = F, alpha = 0.7) +  #&lt;&lt;
  scale_x_log10() +  #&lt;&lt;
  labs(x = 'GDP Per Capita',  #&lt;&lt;
       y = 'Life Expectancy') +  #&lt;&lt;
  scale_size(range = c(2, 15))  #&lt;&lt;
```
]
 
.panel2-chunk_14-user[
![](Flip1_files/figure-html/chunk_14_user_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Primero generamos un gráfico
.panel1-chunk_14-user[

```r
data %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;%
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15))
```
]
 
.panel2-chunk_14-user[
![](Flip1_files/figure-html/chunk_14_user_02_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_14-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_14-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_14-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




```r
data %&gt;% 
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;% 
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15))#BREAK
```

![](Flip1_files/figure-html/chunk_14-1.png)&lt;!-- --&gt;



---

count: false
 
Luego le añadimos la transición animada y lo personalizamos
.panel1-chunk_15-user[

```r
data %&gt;%  #&lt;&lt;
  ggplot()+  #&lt;&lt;
  aes(x = gdpPercap, y = lifeExp,  #&lt;&lt;
      size = pop, color = country) %&gt;%  #&lt;&lt;
  geom_point(show.legend = F, alpha = 0.7) +  #&lt;&lt;
  scale_x_log10() +  #&lt;&lt;
  labs(x = 'GDP Per Capita',  #&lt;&lt;
       y = 'Life Expectancy') +  #&lt;&lt;
  scale_size(range = c(2, 15))   #&lt;&lt;
```
]
 
.panel2-chunk_15-user[
![](Flip1_files/figure-html/chunk_15_user_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Luego le añadimos la transición animada y lo personalizamos
.panel1-chunk_15-user[

```r
data %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;%
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15)) +
  transition_time(year)  #&lt;&lt;
```
]
 
.panel2-chunk_15-user[
![](Flip1_files/figure-html/chunk_15_user_02_output-1.gif)&lt;!-- --&gt;
]

---
count: false
 
Luego le añadimos la transición animada y lo personalizamos
.panel1-chunk_15-user[

```r
data %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;%
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15)) +
  transition_time(year)+
  labs(title = "Producto Bruto Interno vs Esperanza de Vida",  #&lt;&lt;
       subtitle = "Year:{frame_time}")   #&lt;&lt;
```
]
 
.panel2-chunk_15-user[
![](Flip1_files/figure-html/chunk_15_user_03_output-1.gif)&lt;!-- --&gt;
]

---
count: false
 
Luego le añadimos la transición animada y lo personalizamos
.panel1-chunk_15-user[

```r
data %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;%
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15)) +
  transition_time(year)+
  labs(title = "Producto Bruto Interno vs Esperanza de Vida",
       subtitle = "Year:{frame_time}") +
  shadow_wake(0.5)  #&lt;&lt;
```
]
 
.panel2-chunk_15-user[
![](Flip1_files/figure-html/chunk_15_user_04_output-1.gif)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_15-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_15-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_15-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




```r
data %&gt;% 
  ggplot()+
  aes(x = gdpPercap, y = lifeExp,
      size = pop, color = country) %&gt;% 
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15)) + #BREAK
  transition_time(year)+ #BREAK
  labs(title = "Producto Bruto Interno vs Esperanza de Vida",
       subtitle = "Year:{frame_time}") + #BREAK
  shadow_wake(0.5)
```

![](Flip1_files/figure-html/chunk_15-1.gif)&lt;!-- --&gt;



---
# ggrepel


- Proporciona geoms de texto y etiquetas para 'ggplot2' que ayudan a evitar la superposición de etiquetas de texto. 

- Las etiquetas se repelen unas de otras y se alejan de los puntos de datos.


```r
# install.packages("ggrepel")
library(ggrepel)
```


---

count: false
 
Vemos la diferencia entre ggplot2::geom_text() y repel::geom_text_repel()
.panel1-chunk_16-rotate[

```r
data %&gt;%
  filter(continent=="Americas", year==2007) %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp, label=country) +
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15)) +
  geom_text()   #&lt;&lt;
```
]
 
.panel2-chunk_16-rotate[
![](Flip1_files/figure-html/chunk_16_rotate_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 
Vemos la diferencia entre ggplot2::geom_text() y repel::geom_text_repel()
.panel1-chunk_16-rotate[

```r
data %&gt;%
  filter(continent=="Americas", year==2007) %&gt;%
  ggplot()+
  aes(x = gdpPercap, y = lifeExp, label=country) +
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15)) +
  geom_text_repel(max.overlaps=15)  #&lt;&lt;
```
]
 
.panel2-chunk_16-rotate[
![](Flip1_files/figure-html/chunk_16_rotate_02_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-chunk_16-rotate {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_16-rotate {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_16-rotate {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;




```r
data %&gt;% 
  filter(continent=="Americas", year==2007) %&gt;% 
  ggplot()+
  aes(x = gdpPercap, y = lifeExp, label=country) +
  geom_point(show.legend = F, alpha = 0.7) +
  scale_x_log10() +
  labs(x = 'GDP Per Capita',
       y = 'Life Expectancy') +
  scale_size(range = c(2, 15)) +
  geom_text() + #ROTATE
  geom_text_repel(max.overlaps=15) #ROTATE
```

![](Flip1_files/figure-html/chunk_16-1.png)&lt;!-- --&gt;

---

# Notas finales: 

- Puedes ver todos los detalles de ggplot2 en la guía elaborada por el mismo Posit:

https://github.com/rstudio/cheatsheets/blob/main/data-visualization.pdf

- Te recomiendo que explores más sobre las extensiones del ggplot2 y también sobre los argumentos de cada una de las funciones vistas en clase. 

- Qué gráficos has necesitado en tu día a día o te gustaría construir? Seguramente hay un paquete para ello en R. 



&lt;!-- adjust font size in this css code chunk, currently 80 --&gt;

&lt;style type="text/css"&gt;
.remark-code{line-height: 1.5; font-size: 90%}

@media print {
  .has-continuation {
    display: block;
  }
}

code.r.hljs.remark-code{
  position: relative;
  overflow-x: hidden;
}


code.r.hljs.remark-code:hover{
  overflow-x:visible;
  width: 500px;
  border-style: solid;
}
&lt;/style&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": false,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
